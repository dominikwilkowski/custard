/***************************************************************************************************************************************************************
 *
 * Testing server
 *
 **************************************************************************************************************************************************************/

'use strict';

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Dependencies
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
var Fs = require('fs');
var PW = require('promise-wrap');


var Custard = (function Application() {

	return {
		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		// Adding
		//
		// @param  text  [string]   Text to be printed to debugger
		// @param  code  [string]   The urgency as a string: ['report', 'error', 'interaction', 'send', 'receive']
		//
		// @return  [output]  console.log output
		//----------------------------------------------------------------------------------------------------------------------------------------------------------
		add: function Adding( functions ) {
			functions.forEach(function iterateArguments( bit ) {
				console.log('iteration');
				//error handling
				if( typeof bit.run !== 'function' ) {
					console.log('Error dude!: ' + typeof bit.run);

					return;
				}

				if( typeof bit.priority !== 'number' ) {
					if( typeof bit.priority !== 'undefined' ) {
						bit.priority = 0;
					}
					else {
						console.log('Error dude!: ' + typeof bit.priority);
						return;
					}
				}

				PW( bit.run ).then(function( data ) {
					console.log('done');
				});

				console.log('end!');
			});
		},
	};
}());


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Module export
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
module.exports = Custard;